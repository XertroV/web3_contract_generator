targets:
    $default:
        # sources:
        #     include: ["**/*.abi", "**/*.abi.json", "$package$", "lib/$lib$"]
        builders:
            json_serializable:
                options:
                    disallow_unrecognized_keys: true
                    explicit_to_json: true
                    nullable: false
    $web3:
        dependencies:
            - json_serializable
            - $default
        builders:
            web3_contract_generator|web3_gen:
                enabled: false

builders:
  web3_gen:
    target: ":web3_contract_generator"
    import: "package:web3_contract_generator/generator.dart"
    builder_factories: ["web3ContractGen"]
    build_extensions:
        '.abi': [".w3.dart"]
        '.abi.json': [".w3.dart"]
    auto_apply: dependents
    build_to: source
    #applies_builders: ["source_gen|combining_builder"]
    defaults:
        generate_for:
            include:
                - "**/*.abi"
                - "**/*.abi.json"
